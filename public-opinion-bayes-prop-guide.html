<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Si Maxwell">
<meta name="dcterms.date" content="2023-08-25">
<meta name="description" content="Guide">

<title>A guide to Bayesian proportion tests with R and {brms}</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="public-opinion-bayes-prop-guide_files/libs/clipboard/clipboard.min.js"></script>
<script src="public-opinion-bayes-prop-guide_files/libs/quarto-html/quarto.js"></script>
<script src="public-opinion-bayes-prop-guide_files/libs/quarto-html/popper.min.js"></script>
<script src="public-opinion-bayes-prop-guide_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="public-opinion-bayes-prop-guide_files/libs/quarto-html/anchor.min.js"></script>
<link href="public-opinion-bayes-prop-guide_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="public-opinion-bayes-prop-guide_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="public-opinion-bayes-prop-guide_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="public-opinion-bayes-prop-guide_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="public-opinion-bayes-prop-guide_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<style>
    .quarto-title-block .quarto-title-banner {
      color: black;
background: white;
    }
    </style>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">A guide to Bayesian proportion tests with R and {brms}</h1>
            <p class="subtitle lead">Using data from the UK Public Opinion of Forestry 2023 survey</p>
                  <div>
        <div class="description">
          Guide
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Si Maxwell </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">25 August 2023</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#data-wrangling-and-exploration" id="toc-data-wrangling-and-exploration" class="nav-link" data-scroll-target="#data-wrangling-and-exploration">Data wrangling and exploration</a></li>
  <li><a href="#the-questions" id="toc-the-questions" class="nav-link" data-scroll-target="#the-questions">The questions</a>
  <ul class="collapse">
  <li><a href="#question-1-woodland-engagement-among-male-vs.-female-respondents" id="toc-question-1-woodland-engagement-among-male-vs.-female-respondents" class="nav-link" data-scroll-target="#question-1-woodland-engagement-among-male-vs.-female-respondents">Question 1: woodland engagement among male vs.&nbsp;female respondents</a>
  <ul class="collapse">
  <li><a href="#classical-frequentist-way" id="toc-classical-frequentist-way" class="nav-link" data-scroll-target="#classical-frequentist-way">Classical frequentist way</a></li>
  <li><a href="#bayesian-way-with-brms" id="toc-bayesian-way-with-brms" class="nav-link" data-scroll-target="#bayesian-way-with-brms">Bayesian way with {brms}</a></li>
  </ul></li>
  <li><a href="#question-2-support-for-new-woodland-creation-afforestation-in-the-uk" id="toc-question-2-support-for-new-woodland-creation-afforestation-in-the-uk" class="nav-link" data-scroll-target="#question-2-support-for-new-woodland-creation-afforestation-in-the-uk">Question 2: support for new woodland creation (afforestation) in the UK</a></li>
  <li><a href="#estimand" id="toc-estimand" class="nav-link" data-scroll-target="#estimand">Estimand</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">




<hr>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>This report is a tool to help me and others at Forest Research better understand Bayesian inference. It is a guide to Bayesian proportion tests in R using the {brms} package and Forest Research’s Public Opinion of Forestry 2023: UK survey. The survey asked 11,055 adults (aged 16+) in the UK a range of questions on forestry and forestry-related topics. Here we will explore the proportions of respondents who reported visiting woodland in the last few years and those that support increased woodland creation (afforestation) in response to climate change.</p>
<p>The report is heavily (!) based on the fantastic blog post <a href="https://www.andrewheiss.com/blog/2023/05/15/fancy-bayes-diffs-props/">A guide to Bayesian proportion tests with R and {brms}</a> by Andrew Heiss, assistant professor at Georgia State University (published 15 May 2023). This is the first thing I have read where I have come away feeling like I have understand a little about Bayesian inference.</p>
<p>The first thing we need to do is load all the necessary packages for the analysis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(brms)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidybayes)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggdist)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(parameters)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-wrangling-and-exploration" class="level1">
<h1>Data wrangling and exploration</h1>
<p>The first question we are going to explore is labelled KFW_Q1a in YouGov spreadsheet and reads:</p>
<blockquote class="blockquote">
<p>In the last few years have you ever visited forests or woodlands for walks, picnics or other recreation?</p>
</blockquote>
<p>To explore the results we need to load in the data. As the data set is nice and small, it’s easy enough to write it out manually. For reference, the data come from the the <a href="https://www.forestresearch.gov.uk/tools-and-resources/statistics/statistics-by-topic/public-opinion-of-forestry/">raw spreadsheet supplied by YouGov</a>, the market research company that conducted the survey on behalf of Forest Research.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>q1_raw <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>gender, <span class="sc">~</span>n, <span class="sc">~</span>total,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Female"</span>, <span class="fl">4295.632</span>, <span class="fl">5693.3235</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Male"</span>, <span class="fl">3890.773</span>, <span class="fl">5361.675</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We are going to explore the difference in the proportions shown in blue in Table 1.</p>
<section id="table-1-contingency-table-showing-the-proportion-of-men-and-women-that-visited-woodland-in-the-last-few-years-uk-2023" class="level4">
<h4 class="anchored" data-anchor-id="table-1-contingency-table-showing-the-proportion-of-men-and-women-that-visited-woodland-in-the-last-few-years-uk-2023">Table 1: Contingency table showing the proportion of men and women that visited woodland in the last few years, UK, 2023</h4>
<div class="cell">
<div class="cell-output-display">

<div id="ocvedmbrvp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ocvedmbrvp table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ocvedmbrvp thead, #ocvedmbrvp tbody, #ocvedmbrvp tfoot, #ocvedmbrvp tr, #ocvedmbrvp td, #ocvedmbrvp th {
  border-style: none;
}

#ocvedmbrvp p {
  margin: 0;
  padding: 0;
}

#ocvedmbrvp .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ocvedmbrvp .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ocvedmbrvp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 15px;
  padding-right: 15px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ocvedmbrvp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 15px;
  padding-right: 15px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ocvedmbrvp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ocvedmbrvp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ocvedmbrvp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ocvedmbrvp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 15px;
  padding-right: 15px;
  overflow-x: hidden;
}

#ocvedmbrvp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ocvedmbrvp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ocvedmbrvp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ocvedmbrvp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ocvedmbrvp .gt_spanner_row {
  border-bottom-style: hidden;
}

#ocvedmbrvp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ocvedmbrvp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ocvedmbrvp .gt_from_md > :first-child {
  margin-top: 0;
}

#ocvedmbrvp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ocvedmbrvp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ocvedmbrvp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 15px;
  padding-right: 15px;
}

#ocvedmbrvp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 15px;
  padding-right: 15px;
  vertical-align: top;
}

#ocvedmbrvp .gt_row_group_first td {
  border-top-width: 2px;
}

#ocvedmbrvp .gt_row_group_first th {
  border-top-width: 2px;
}

#ocvedmbrvp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
}

#ocvedmbrvp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ocvedmbrvp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ocvedmbrvp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ocvedmbrvp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
}

#ocvedmbrvp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ocvedmbrvp .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ocvedmbrvp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ocvedmbrvp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ocvedmbrvp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ocvedmbrvp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 15px;
  padding-right: 15px;
}

#ocvedmbrvp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ocvedmbrvp .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 15px;
  padding-right: 15px;
}

#ocvedmbrvp .gt_left {
  text-align: left;
}

#ocvedmbrvp .gt_center {
  text-align: center;
}

#ocvedmbrvp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ocvedmbrvp .gt_font_normal {
  font-weight: normal;
}

#ocvedmbrvp .gt_font_bold {
  font-weight: bold;
}

#ocvedmbrvp .gt_font_italic {
  font-style: italic;
}

#ocvedmbrvp .gt_super {
  font-size: 65%;
}

#ocvedmbrvp .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ocvedmbrvp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ocvedmbrvp .gt_indent_1 {
  text-indent: 5px;
}

#ocvedmbrvp .gt_indent_2 {
  text-indent: 10px;
}

#ocvedmbrvp .gt_indent_3 {
  text-indent: 15px;
}

#ocvedmbrvp .gt_indent_4 {
  text-indent: 20px;
}

#ocvedmbrvp .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Gender">Gender</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Proportion">Proportion</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="gender" class="gt_row gt_left"><div class="gt_from_md"><p>Female</p>
</div></td>
<td headers="label" class="gt_row gt_center" style="background-color: #D7EBFF; color: #009DDC; font-weight: bold;"><div class="gt_from_md"><p>75.5%<br><span style="font-size:70%">(4,296)</span></p>
</div></td></tr>
    <tr><td headers="gender" class="gt_row gt_left"><div class="gt_from_md"><p>Male</p>
</div></td>
<td headers="label" class="gt_row gt_center" style="background-color: #D7EBFF; color: #009DDC; font-weight: bold;"><div class="gt_from_md"><p>72.6%<br><span style="font-size:70%">(3,891)</span></p>
</div></td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
</section>
</section>
<section id="the-questions" class="level1">
<h1>The questions</h1>
<p>The aim of this article is to illustrate the logic of Bayesian proportion tests using data from the UK Public Opinion of Forestry Survey 2023 by answering two questions:</p>
<ol type="1">
<li>Is the proportion woodland visitors higher among female respondents than male respondents? (Shown in blue in Table 1.)</li>
<li>Do adults in the UK vary in their support for woodland creation as a climate change mitigation strategy? (Shown in orange in Table x.)</li>
</ol>
<section id="question-1-woodland-engagement-among-male-vs.-female-respondents" class="level2">
<h2 class="anchored" data-anchor-id="question-1-woodland-engagement-among-male-vs.-female-respondents">Question 1: woodland engagement among male vs.&nbsp;female respondents</h2>
<p>…</p>
<p>For our first question, we want to know if there is a substantial difference in the proportion of woodland visitors among male and female respondents, or whether the difference between them is zero (in Table 1).</p>
<p>In formal mathematical notation, we will call this the estimand <span class="math inline">\(\theta\)</span>, which is the difference between the two proportions <span class="math inline">\(\pi\)</span>:</p>
<p><span class="math display">\[
\theta = \pi_{\text{woodland visitor}_{\text{female}}} - \pi_{\text{woodland visitor}_{\text{male}}}
\]</span></p>
<section id="classical-frequentist-way" class="level3">
<h3 class="anchored" data-anchor-id="classical-frequentist-way">Classical frequentist way</h3>
<p>…</p>
<p>Null hypothesis:</p>
<p><span class="math display">\[
\theta = 0
\]</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>q1_matrix <span class="ot">&lt;-</span> q1_raw <span class="sc">|&gt;</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_didnt =</span> total <span class="sc">-</span> n) <span class="sc">|&gt;</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(gender,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>            total)) <span class="sc">|&gt;</span> </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.matrix</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can now pass <code>q1_matrix</code> to <code>prop.test()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.test</span>(q1_matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    2-sample test for equality of proportions with continuity correction

data:  q1_matrix
X-squared = 11.802, df = 1, p-value = 0.0005915
alternative hypothesis: two.sided
95 percent confidence interval:
 0.01229983 0.04537957
sample estimates:
   prop 1    prop 2 
0.7545034 0.7256637 </code></pre>
</div>
</div>
<p>We have proportions that are the same as in Table 1 (75.5% / 72.6%) and the 95% confidence interval for the difference. Oddly, R doesn’t show us the difference. The <code>parameters()</code> function from the {parameters} package offers a more informative output (Table 2).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.test</span>(q1_matrix) <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model_parameters</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="table-2" class="level4">
<h4 class="anchored" data-anchor-id="table-2">Table 2:</h4>
<div class="cell">
<div class="cell-output-display">

<div id="xnsfnlrfhq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xnsfnlrfhq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xnsfnlrfhq thead, #xnsfnlrfhq tbody, #xnsfnlrfhq tfoot, #xnsfnlrfhq tr, #xnsfnlrfhq td, #xnsfnlrfhq th {
  border-style: none;
}

#xnsfnlrfhq p {
  margin: 0;
  padding: 0;
}

#xnsfnlrfhq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xnsfnlrfhq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xnsfnlrfhq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 15px;
  padding-right: 15px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xnsfnlrfhq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 15px;
  padding-right: 15px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xnsfnlrfhq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xnsfnlrfhq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xnsfnlrfhq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xnsfnlrfhq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 15px;
  padding-right: 15px;
  overflow-x: hidden;
}

#xnsfnlrfhq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xnsfnlrfhq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xnsfnlrfhq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xnsfnlrfhq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xnsfnlrfhq .gt_spanner_row {
  border-bottom-style: hidden;
}

#xnsfnlrfhq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xnsfnlrfhq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xnsfnlrfhq .gt_from_md > :first-child {
  margin-top: 0;
}

#xnsfnlrfhq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xnsfnlrfhq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xnsfnlrfhq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 15px;
  padding-right: 15px;
}

#xnsfnlrfhq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 15px;
  padding-right: 15px;
  vertical-align: top;
}

#xnsfnlrfhq .gt_row_group_first td {
  border-top-width: 2px;
}

#xnsfnlrfhq .gt_row_group_first th {
  border-top-width: 2px;
}

#xnsfnlrfhq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
}

#xnsfnlrfhq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xnsfnlrfhq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xnsfnlrfhq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xnsfnlrfhq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
}

#xnsfnlrfhq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xnsfnlrfhq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xnsfnlrfhq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xnsfnlrfhq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xnsfnlrfhq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xnsfnlrfhq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 15px;
  padding-right: 15px;
}

#xnsfnlrfhq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xnsfnlrfhq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 15px;
  padding-right: 15px;
}

#xnsfnlrfhq .gt_left {
  text-align: left;
}

#xnsfnlrfhq .gt_center {
  text-align: center;
}

#xnsfnlrfhq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xnsfnlrfhq .gt_font_normal {
  font-weight: normal;
}

#xnsfnlrfhq .gt_font_bold {
  font-weight: bold;
}

#xnsfnlrfhq .gt_font_italic {
  font-style: italic;
}

#xnsfnlrfhq .gt_super {
  font-size: 65%;
}

#xnsfnlrfhq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xnsfnlrfhq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xnsfnlrfhq .gt_indent_1 {
  text-indent: 5px;
}

#xnsfnlrfhq .gt_indent_2 {
  text-indent: 10px;
}

#xnsfnlrfhq .gt_indent_3 {
  text-indent: 15px;
}

#xnsfnlrfhq .gt_indent_4 {
  text-indent: 20px;
}

#xnsfnlrfhq .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Proportion">Proportion</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Difference">Difference</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="CI low">CI low</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="CI high">CI high</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Chi2">Chi2</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="p">p</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Method">Method</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Proportion" class="gt_row gt_right"><div class="gt_from_md"><p>75.45% / 72.57%</p>
</div></td>
<td headers="Difference" class="gt_row gt_right"><div class="gt_from_md"><p>2.88%</p>
</div></td>
<td headers="CI_low" class="gt_row gt_right">1.23%</td>
<td headers="CI_high" class="gt_row gt_right">4.54%</td>
<td headers="Chi2" class="gt_row gt_right">11.8</td>
<td headers="p" class="gt_row gt_right">5.92 × 10<sup style="font-size: 65%;">−4</sup></td>
<td headers="Method" class="gt_row gt_left"><div class="gt_from_md"><p>2-sample test for equality of proportions</p>
</div></td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>We have a <span class="math inline">\(\chi^2\)</span> statistic of 11.8 which is statistically significant. In a hypothetical world where there’s no difference in the proportions, the probability of seeing a difference of at least 2.88 percentage points is tiny (<span class="math inline">\(p &lt; 0.001\)</span>). We, therefore, have enough evidence to confidently reject the null hypothesis and declare that the proportions are not the same. With the confidence interval, we can say with 95% confidence that the interval 0.012 to 0.045 contains the true population parameter.</p>
<p>Let’s leave the frequentist paradigm behind.</p>
</section>
</section>
<section id="bayesian-way-with-brms" class="level3">
<h3 class="anchored" data-anchor-id="bayesian-way-with-brms">Bayesian way with {brms}</h3>
<p>…</p>
<p>The official statistical term for this kind of data-generating processes (a bunch of independent trials with some probability of success) is a binomial distribution. It is defined by three parameters:</p>
<p><span class="math display">\[
y \sim \operatorname{Binomial}(n, \pi)
\]</span></p>
<p>Where:</p>
<ol type="1">
<li>Number of successes (<span class="math inline">\(y\)</span>): the number of respondents who visited woodland in the last few years, or <code>n</code> in our Q1 data set.</li>
<li>Probability of success (<span class="math inline">\(\pi\)</span>): the probability that someone visited woodland in the last few years, or the thing we want to model for each gender.</li>
<li>Number of trials (<span class="math inline">\(n\)</span>): the total number of people surveyed, or <code>total</code> in our Q1 data set.</li>
</ol>
<p>We are interested in the probability of a “success” (i.e., <span class="math inline">\(\pi\)</span>), which is the number of successes divided by the total number of trials:</p>
<p><span class="math display">\[
\frac{\text{Number of successes}}{\text{Number of trials}}
\]</span></p>
<p>Or:</p>
<p><span class="math display">\[
\frac{\text{Number of successes}}{\text{Number of successes} + \text{Number of failures}}
\]</span></p>
<p>Expressed in terms of our data on woodland visitors in the UK Public Opinion of Forestry 2023 survey:</p>
<p><span class="math display">\[
\frac{\text{Number of woodland visitors}}{\text{Number of respondents}}
\]</span> Similarly, we can split the denominator into woodland visitors and non-visitors:</p>
<p><span class="math display">\[
\frac{\text{Number of woodland visitors}}{(\text{Number of woodland visitors}) + (\text{Number of non-visitors)}}
\]</span></p>
<p>Where a non-visitor will, in our case, include those that did not go outside and those that visited other green and natural spaces (e.g., mountains or the sea).</p>
<p>The <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> parameters correspond to the number of successes and failures, respectively:</p>
<p><span class="math display">\[
\frac{\alpha}{\alpha + \beta}
\]</span></p>
<p>With these shape parameters we can create any percentage or fraction we want. In addition, we can control for the uncertainty if the distribution by changing with the size of the parameters. For instance, if we think that there is a 60% chance of some event this could be represented with <span class="math inline">\(\alpha = 6\)</span> and <span class="math inline">\(\beta = 4\)</span>, since <span class="math inline">\(\frac{6}{6+4} = 0.4\)</span>. We could also write it as <span class="math inline">\(\alpha = 60\)</span> and <span class="math inline">\(\beta = 40\)</span>, since <span class="math inline">\(\frac{60}{60+40} = 0.4\)</span> too. Both are centred at 40% but Beta(60, 40) is a lot narrower and more certain than Beta(6, 4) (Figure x).</p>
<section id="figure-x" class="level4">
<h4 class="anchored" data-anchor-id="figure-x">Figure x:</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_function</span>(<span class="at">fun =</span> <span class="sc">~</span><span class="fu">dbeta</span>(., <span class="dv">6</span>, <span class="dv">4</span>), <span class="at">geom =</span> <span class="st">"area"</span>,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                <span class="fu">aes</span>(<span class="at">fill =</span> <span class="st">"Beta(6, 4)"</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_function</span>(<span class="at">fun =</span> <span class="sc">~</span><span class="fu">dbeta</span>(., <span class="dv">60</span>, <span class="dv">40</span>), <span class="at">geom =</span> <span class="st">"area"</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>                <span class="fu">aes</span>(<span class="at">fill =</span> <span class="st">"Beta(60, 40)"</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Beta(6, 4)"</span> <span class="ot">=</span> <span class="st">"#FFDC00"</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Beta(60, 40)"</span> <span class="ot">=</span> <span class="st">"#F012BE"</span>)) <span class="sc">+</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"π"</span>, <span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">fill =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="public-opinion-bayes-prop-guide_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We have already seen the data and know that the proportion of woodland visitors is around 73% of male respondents and 76% for female respondents. But let’s pretend that we haven’t seen the data and all our prior knowledge is based on the 2021 Public Opinion of Forestry survey. In the previous survey, 69% of respondents reported visiting woodland in the last few years. To make the maths easier, let’s say 70% instead. This implies something like a Beta(7, 3) distribution (since <span class="math inline">\(\frac{7}{7+3} = 0.7\)</span>), with lots of high possible values greater than 50% but not a lot lower than 40%. We could narrow this down by scaling up the parameters (e.g., Beta(70, 30)), but leaving the prior distribution wide like this allows for more possible responses.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_function</span>(<span class="at">fun =</span> <span class="sc">~</span><span class="fu">dbeta</span>(., <span class="dv">7</span>, <span class="dv">3</span>), <span class="at">geom =</span> <span class="st">"area"</span>, <span class="at">fill =</span> <span class="st">"#AC3414"</span>) <span class="sc">+</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Possible values for π"</span>, <span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">fill =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.y =</span> <span class="fu">element_blank</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="public-opinion-bayes-prop-guide_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Okay, so with our Beta(7, 3) prior, we now have all the information we need to specify the official formal model of the data generating process for our estimand without null hypotheses in sight:</p>
<p><span class="math display">\[
\begin{aligned}
&amp;\ \textbf{Estimand} \\
\theta =&amp;\ \pi_{\text{woodland visitor}_\text{female}} - \pi_{\text{woodland visotor}_\text{male}} \\[10pt]
&amp;\ \textbf{Beta-binomial model for female} \\
y_{n \text{ woodland visitor}_\text{female}} \sim&amp;\ \operatorname{Binomial}(n_{\text{total}_\text{female}}, \pi_{\text{woodland visotor}_\text{female}}) \\
\pi_{\text{woodland visitor}_\text{female}} \sim&amp;\ \operatorname{Beta}(\alpha_\text{female}, \beta_\text{female}) \\[10pt]
&amp;\ \textbf{Beta-binomial model for male} \\
y_{n \text{ woodland visitor}_\text{male}} \sim&amp;\ \operatorname{Binomial}(n_{\text{total}_\text{male}}, \pi_{\text{woodland visitor}_\text{male}}) \\
\pi_{\text{woodland visitor}_\text{male}} \sim&amp;\ \operatorname{Beta}(\alpha_\text{male}, \beta_\text{male}) \\[10pt]
&amp;\ \textbf{Priors} \\
\alpha_\text{female}, \alpha_\text{male} =&amp;\ 7 \\
\beta_\text{female}, \beta_\text{male} =&amp;\ 3
\end{aligned}
\]</span> …</p>
</section>
</section>
</section>
<section id="question-2-support-for-new-woodland-creation-afforestation-in-the-uk" class="level2">
<h2 class="anchored" data-anchor-id="question-2-support-for-new-woodland-creation-afforestation-in-the-uk">Question 2: support for new woodland creation (afforestation) in the UK</h2>
<p>Thinking about managing UK forests and woodlands in response to climate change…To what extent do you agree or disagree with each of the following statements?</p>
<p>SFW_Q14_2</p>
<p><em>A lot more trees should be planted.</em></p>
<p>With this question we are going to look at the population as a whole and not at male v. female. For reason we will need to aggreate the data. In addition, I have collapsed or renamed the possible responses into:</p>
<ul>
<li>Agree = “strongly agree” + “tend to agree”</li>
<li>Neither = “Neither agree nor disagree”</li>
<li>Disagree = “strongly disagree” + “tend to disagree”</li>
</ul>
<p>And “don’t know” responses have been removed (after the calculation of the proportions).</p>
</section>
<section id="estimand" class="level2">
<h2 class="anchored" data-anchor-id="estimand">Estimand</h2>
<p>For this question</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>wc_by_gender <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>support, <span class="sc">~</span>male, <span class="sc">~</span>female,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Strongly agree"</span>, <span class="fl">2466.67</span>, <span class="fl">2752.2</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Tend to agree"</span>,  <span class="fl">1946.04</span>, <span class="fl">2074.11</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Neither agree nor disagree"</span>, <span class="fl">677.33</span>, <span class="fl">583.91</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Tend to disagree"</span>, <span class="fl">101.52</span>, <span class="fl">84.49</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Strongly disagree"</span>, <span class="fl">54.41</span>,   <span class="fl">34.31</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Don't know"</span>, <span class="fl">115.71</span>, <span class="fl">164.31</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div id="kihuygfmiq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#kihuygfmiq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#kihuygfmiq thead, #kihuygfmiq tbody, #kihuygfmiq tfoot, #kihuygfmiq tr, #kihuygfmiq td, #kihuygfmiq th {
  border-style: none;
}

#kihuygfmiq p {
  margin: 0;
  padding: 0;
}

#kihuygfmiq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#kihuygfmiq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#kihuygfmiq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 15px;
  padding-right: 15px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#kihuygfmiq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 15px;
  padding-right: 15px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#kihuygfmiq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kihuygfmiq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kihuygfmiq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kihuygfmiq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 15px;
  padding-right: 15px;
  overflow-x: hidden;
}

#kihuygfmiq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#kihuygfmiq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#kihuygfmiq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#kihuygfmiq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#kihuygfmiq .gt_spanner_row {
  border-bottom-style: hidden;
}

#kihuygfmiq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#kihuygfmiq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#kihuygfmiq .gt_from_md > :first-child {
  margin-top: 0;
}

#kihuygfmiq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#kihuygfmiq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#kihuygfmiq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 15px;
  padding-right: 15px;
}

#kihuygfmiq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 15px;
  padding-right: 15px;
  vertical-align: top;
}

#kihuygfmiq .gt_row_group_first td {
  border-top-width: 2px;
}

#kihuygfmiq .gt_row_group_first th {
  border-top-width: 2px;
}

#kihuygfmiq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
}

#kihuygfmiq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#kihuygfmiq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#kihuygfmiq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kihuygfmiq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
}

#kihuygfmiq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#kihuygfmiq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 15px;
  padding-right: 15px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#kihuygfmiq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#kihuygfmiq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kihuygfmiq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kihuygfmiq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 15px;
  padding-right: 15px;
}

#kihuygfmiq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kihuygfmiq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 15px;
  padding-right: 15px;
}

#kihuygfmiq .gt_left {
  text-align: left;
}

#kihuygfmiq .gt_center {
  text-align: center;
}

#kihuygfmiq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#kihuygfmiq .gt_font_normal {
  font-weight: normal;
}

#kihuygfmiq .gt_font_bold {
  font-weight: bold;
}

#kihuygfmiq .gt_font_italic {
  font-style: italic;
}

#kihuygfmiq .gt_super {
  font-size: 65%;
}

#kihuygfmiq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#kihuygfmiq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#kihuygfmiq .gt_indent_1 {
  text-indent: 5px;
}

#kihuygfmiq .gt_indent_2 {
  text-indent: 10px;
}

#kihuygfmiq .gt_indent_3 {
  text-indent: 15px;
}

#kihuygfmiq .gt_indent_4 {
  text-indent: 20px;
}

#kihuygfmiq .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Support">Support</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Proportion">Proportion</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="support" class="gt_row gt_left"><div class="gt_from_md"><p>Agree</p>
</div></td>
<td headers="label" class="gt_row gt_center"><div class="gt_from_md"><p>83.6%<br><span style="font-size:70%">(9,239)</span></p>
</div></td></tr>
    <tr><td headers="support" class="gt_row gt_left"><div class="gt_from_md"><p>Neither</p>
</div></td>
<td headers="label" class="gt_row gt_center"><div class="gt_from_md"><p>11.4%<br><span style="font-size:70%">(1,261)</span></p>
</div></td></tr>
    <tr><td headers="support" class="gt_row gt_left"><div class="gt_from_md"><p>Disagree</p>
</div></td>
<td headers="label" class="gt_row gt_center"><div class="gt_from_md"><p>2.5%<br><span style="font-size:70%">(275)</span></p>
</div></td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>Again, we’ll call the estimand <span class="math inline">\(\theta\)</span> but this time we have three different versions of it:</p>
<p><span class="math display">\[
\text{(1) } \theta_{AN} = \pi_{\text{agree}} - \pi_{\text{neither}}
\]</span></p>
<p><span class="math display">\[
\text{(2) } \theta_{AD} = \pi_{\text{agree}} - \pi_{\text{disagree}}
\]</span></p>
<p><span class="math display">\[
\text{(3) } \theta_{ND} = \pi_{\text{neither}} - \pi_{\text{disagree}}
\]</span></p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>